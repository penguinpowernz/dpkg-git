#!/bin/bash

usage() {
  echo "Usage: dpkg-git <action> <repo> [path]

  Actions:
      -i      install the package from the path
      -b      build the package from the path

  Repo:
      The repo is a local repository but it must 
      contain valid Debian control files
      
      /path/to/repo

  Path:
      The path refers to a place in which to save
      the debian file to (-b only)

"

}

BIN="/usr/share/dpkg-git/bin";

ACTION=$1;
SRCDIR=$2;

case "$ACTION" in
  "-i")
    deb="$($BIN/dpkg-git-build.sh "$SRCDIR" /var/cache/dpkg-git/debs)";
    dpkg -i $deb;
    ;;
  "-b") $BIN/dpkg-git-build.sh "$SRCDIR" "$3";;
  *) usage ;;
esac;